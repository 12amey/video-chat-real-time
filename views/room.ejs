<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Video Chat Room</title>
    <link rel="stylesheet" href="room-style.css" />
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://kit.fontawesome.com/c939d0e917.js"></script>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
      const ROOM_ID = "<%= roomId %>";
    </script>
  </head>
  <body>
    <div id="particles-background"></div>
    
    <div class="header">
      <div class="header-content">
        <div class="logo">
          <div class="header__back">
            <i class="fas fa-arrow-left"></i>
          </div>
          <i class="fas fa-video logo-icon"></i>
          <h3>3D Video Chat</h3>
        </div>
        <div class="room-info">
          <span class="room-label">Room ID:</span>
          <span class="room-id" id="roomIdDisplay"><%= roomId.substring(0, 8) %>...</span>
          <button class="copy-btn" id="copyRoomId">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="main__left">
        <div class="videos__group">
          <div id="video-grid"></div>
          <div class="no-video-message" id="noVideoMessage">
            <i class="fas fa-user-friends"></i>
            <p>Waiting for others to join...</p>
          </div>
        </div>
        
        <div class="controls-container">
          <div class="controls">
            <div class="controls__left">
              <button id="muteButton" class="control-btn" title="Toggle Microphone">
                <i class="fas fa-microphone"></i>
                <span class="control-label">Mic</span>
              </button>
              <button id="stopVideo" class="control-btn" title="Toggle Video">
                <i class="fas fa-video"></i>
                <span class="control-label">Video</span>
              </button>
              <button id="showChat" class="control-btn" title="Toggle Chat">
                <i class="fas fa-comments"></i>
                <span class="control-label">Chat</span>
              </button>
            </div>
            
            <div class="controls__center">
              <button id="leaveButton" class="control-btn leave-btn" title="Leave Call">
                <i class="fas fa-phone-slash"></i>
                <span class="control-label">Leave</span>
              </button>
            </div>
            
            <div class="controls__right">
              <button id="inviteButton" class="control-btn" title="Invite Users">
                <i class="fas fa-user-plus"></i>
                <span class="control-label">Invite</span>
              </button>
              <button id="screenShareButton" class="control-btn" title="Share Screen">
                <i class="fas fa-desktop"></i>
                <span class="control-label">Share</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="main__right">
        <div class="chat-header">
          <h4><i class="fas fa-comments"></i> Chat</h4>
          <button class="close-chat" id="closeChat">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="main__chat_window">
          <div class="messages" id="messages"></div>
        </div>
        <div class="main__message_container">
          <input id="chat_message" type="text" autocomplete="off" placeholder="Type your message...">
          <button id="send" class="send-btn">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="notification" id="notification"></div>
    
    <script src="room-script.js"></script>
  </body>
</html>
